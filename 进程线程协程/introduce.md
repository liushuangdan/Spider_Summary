
进程，线程，协程，
---

## 进程：

进程是具有一定独立功能的程序，是关于某种数据集合上的一次运行活动，进程是系统进行资源分配和调度的一个独立单位。

每个进程都有自己的独立内存空间，不同进程通过进程间通信来通信，由于进程比较重量，占据独立的内存，所以上下文进程间的切换开销比较大，但相对来说比较稳定、安全

---

## 线程
线程是进程的一个实体，是系统进行调度和分派的基本单位，是比进程更小的能够独立运行的基本单位。

线程几乎不拥有系统资源，只拥有一点在运行中比不可少的资源，但每个线程可与同属于一个进程下的其他线程共享该进程的全部资源。

线程间通信主要通过共享内存，上下文切换很快，资源消耗比较小，但相比进程不够稳定，容易丢失数据

---

## 进程和线程的区别：

（1）每个程序至少有一个进程，每个进程至少有一个线程

（2）进程的划分尺度大于线程，使得进程的并发性较高

（3）进程在执行的过程中独享内存单元，而多个线程共享内存，从而大大的提高了程序的运行效率

（4）线程不能够独立执行，必须依存在进程中

（5）进程有利于资源的管理和保护,但执行开销较大，而线程正好相反

---
##协程

协程是一种用户态的轻量级线程，协程的调度完全由用户控制。

协程拥有自己的寄存器、上下文和栈，在调度切换时，将寄存器、上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器、上下文和栈。

直接操作栈侧，基本上没有内核切换的开销，可以不加锁的访问全局变量，所以上下文切非常快

---

**优点：**

（1）不需要上下文切换的开销，避免了无意义的调度，提高了性能

（2）无需原子操作锁定以及同步的开销

（3）方便切换控制流，简化编程模型

（4）高并发、高扩展、低成本

**缺点：**

（1）无法利用多核资源

    协程的本质是单线程，它不能同时将单个CPU的多个核用上，协程需要和进程配合才能运行在多CPU上

（2）进行阻塞操作会阻塞掉整个程序

---


